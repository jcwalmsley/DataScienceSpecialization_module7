---
title: "Regression Models Project - Motor Trend Data 'mtcars' Miles Per Gallon Analysis"
author: "james c walmsley"
date: "12/1/2016"
output: 
  pdf_document: 
    fig_caption: yes
    fig_crop: yes
    fig_height: 7
    fig_width: 7
---

# I. Executive Summary:  
        ## Add after completing analysis  

---

# II. Problem Statement & Questions to Answer:  
        ## Assuming I work for Motor Trend, a magazine about the automobile industry. Looking at the data set of a collection of cars ("mtcars") I know that;   
        ## They are interested in exploring the relationship between a set of variables and the miles per gallon (mpg) outcome.   
        ## They are particularly interested in the following two questions:  
                ## Q1 “Is an automatic or manual transmission better for 'mpg'”  
                ## Q2 "Quantify the MPG difference between automatic and manual transmissions"  
---

# Grading - Criteria (remove on completion)!!!  

Did the student interpret the coefficients correctly?  

Did the student do some exploratory data analyses?  

Did the student fit multiple models and detail their strategy for model selection?  

Did the student answer the questions of interest or detail why the question(s) is (are) not answerable?  

Did the student do a residual plot and some diagnostics?  

Did the student quantify the uncertainty in their conclusions and/or perform an inference correctly?  

Was the report brief (about 2 pages long) for the main body of the report and no longer than 5 with supporting appendix of figures?  

Did the report include an executive summary?  

YES Was the report done in Rmd (knitr) with pdf output?  

---

# III. Analysis Considerations:
        Descriptive  
        Exploratory  
        Regression to the mean - Simple linear regression  
        Multivariable regression analysis  
        Adjustments
        Residuals, variation, diagnostics
        Multiple variables & model selection
        GLMs
        Binary GLMs
---

# IV. Software Environment:
        System - session Info:
```{r Session Info, echo=TRUE}
sessionInfo()
```
---

# V. Accessing Data:
        Getting the data: 
```{r Get data, echo=FALSE,}
rm(list=ls()); data("mtcars") 
```
---       

# VI. Raw Data Overview: 
        Motor Trend 'mtcars' data set:
```{r Data overview, echo=TRUE}
any(is.na(mtcars)); colnames(mtcars)
```
---

# VII. Processing Data:  
        Transformations;  
                1 factor variables 8:11;  
                2 change variable labels in columns 8 & 9;      
                        a Note; for column header 8 = vs; variable names = V-block, & S-block;  
                        b Note; for column header 9 = am; variable names = Automatic = A, & Manual = M;
---                        
```{r Process data, echo=FALSE}
data(mtcars)
mtcars$vs <- factor(mtcars$vs, labels = c("V-eng", "S-eng")); mtcars$am <- factor(mtcars$am, labels = c("Automatic", "Manual")); mtcars$gear <- factor(mtcars$gear); mtcars$carb <- factor(mtcars$carb)
head(mtcars,3)
```

---

# VIII. Exploratory Analysis:  
        Add narrative here!!
        See Appendix A, Figures 1:4 
---  

# IX. Statistical Modeling, Regression & Model Fit:
        Assumptions:
                A Correlation may exist among multiple variables
                B
                C
        Simple Linear Regression
```{r SimpleLinearRegression, echo=FALSE}
fslrm <- lm(mpg ~ am, data = mtcars) 
coef(summary(fslrm))
plot(fslrm)
```

---        
        Multivariate Linear Regression
                lm - multivariate
```{r MLR, echo=TRUE,}
mlr1 <- lm(mpg ~ ., data = mtcars)
coef(summary(mlr1))
plot(mlr1)
```
                
                
                lm - nested
```{r Nested, echo=TRUE}
data("mtcars")
names(mtcars)
fn1 <- lm(mpg ~ cyl + disp, data = mtcars)
fn2 <- update(fn1, mpg ~ cyl + disp + hp)
fn3 <- update(fn1, mpg ~ cyl + disp + hp + drat)
fn4 <- update(fn1, mpg ~ cyl + disp + hp + drat + wt)
fn5 <- update(fn1, mpg ~ cyl + disp + hp + drat + wt +  qsec)
fn6 <- update(fn1, mpg ~ cyl + disp + hp + drat + wt +  qsec + vs)
fn7 <- update(fn1, mpg ~ cyl + disp + hp + drat + wt +  qsec + vs +  am)
fn8 <- update(fn1,mpg ~ cyl + disp + hp + drat + wt +  qsec + vs +  am +  gear)
fn9 <- update(fn1,mpg ~ cyl + disp + hp + drat + wt +  qsec + vs +  am +  gear + carb)
anova(fn1, fn2, fn3, fn4, fn5, fn6, fn7, fn8, fn9) 

```

                
                lm - remove the intercept (-1)
                lm - step function 
---

# X.Preliminary Findings: Questions of Interest: & Interpretation of Results:
        A
        B
        C

---
# XI. Inference:
        Hypothesis':
                A H0 = The difference between Automatic and Manual transmission MPG = 0   
                B Ha = The difference between Automatic and Manual transmission MPG != 0
                C Select the desired confidence interval = .975 (two sided)
                D Alpha = 0.025
                        Standard Error
                        Variance
                        student's T-score
                        Z-score
                        p-Values
                E Resisuals Leverage & Influence Measures
---

# XII. Conclusions / Recommendations:  
        A
        B
        C
                1 Challenge the results ?
                2 Measures of uncertainty 'e'
---

# XIII. Are there other alternative analyses?
        A
        B
---

# XIV. Appendix A, "Visual Analysis Plots""

## Pairs
---

```{r Pairs Figure 1, echo=FALSE, fig.height=6, fig.width=6}
pairs(mpg ~ ., data = mtcars)
```
---                
        
## Histograms
---

```{r Hist Figure 1, echo=FALSE, fig.height=5, fig.width=5}
par(mfrow = c(2,1), mar = c(4,4,2,1)) # set margin
data("mtcars")
mtcars$vs <- factor(mtcars$vs, labels = c("V-block", "S-block")); mtcars$am <- factor(mtcars$am, labels = c("Auto", "Manual")); mtcars$gear <- factor(mtcars$gear); mtcars$carb <- factor(mtcars$carb)
head(mtcars,3)
hist(mtcars$mpg[mtcars$am=="Auto"], breaks=10, xlab = "Miles-Per-gallon", ylab = "Count", main = "Automatic Transmission", col = "yellow", xlim = range(5:40))
abline(v=mean(mtcars$mpg[mtcars$am=="Auto"]), col="red", lwd = 4)
hist(mtcars$mpg[mtcars$am=="Manual"], breaks=10, xlab = "Miles-Per-gallon", ylab = "Count", main = "Manual Transmission", col="lightblue", xlim = range(5:40))
abline(v=mean(mtcars$mpg[mtcars$am=="Manual"]), col="blue", lwd = 4)
```

---                
        
## Box Plots
---

```{r Box Plot Figure 1, echo=FALSE, fig.height=7, fig.width=7}
data("mtcars")
data("mtcars")
mtcars$vs <- factor(mtcars$vs, labels = c("V-block", "S-block")); mtcars$am <- factor(mtcars$am, labels = c("Auto", "Manual")); mtcars$gear <- factor(mtcars$gear); mtcars$carb <- factor(mtcars$carb)
head(mtcars,3)
boxplot(mpg ~ am, data = mtcars, col = (c("yellow","lightblue")), ylab = "Miles-Per-Gallon", xlab = "Transmission", main =  "Automatic vs Manual Transmission Miles Per Gallon")
```
---                







## QQ Plots
---

```{r QQ plot, echo=FALSE, fig.height=5, fig.width=5}
data("mtcars")
#qqPlot(fit?, main="Q-Q plot")
```
---                
        
## Single Variable Linear Model Regression Plot
```{r SingleVarLMfit, echo=FALSE}
data("mtcars")
f1 <- lm(mpg ~ factor(am), data = mtcars)
coef(summary(f1))
library(ggplot2)

```

---
## Bivariate Linear Model Regression plot
```{r}
data("mtcars")
f2 <- lm(mpg ~ factor(am) + wt, data = mtcars)
coef(summary(f2))
f3 <- lm(mpg ~ factor(am) * wt, data = mtcars)
coef(summary(f3))
```

---

```{r Fitted plot, fig.height=5, fig.width=5}
#To be inserted
```
---
## Multivariate Linear Model(s) plot

---

```{r Fitted plot2, fig.height=5, fig.width=5}
#To be inserted
```
---                
        
## Residuals plot

---

```{r Residual plot, echo=FALSE, fig.height=5, fig.width=5}
#plot(resid(fit?))
#abline(h=0)
```
---                
        
## Residuals vs Fitted

---

```{r Residuals vs Fitted plot, echo=FALSE, fig.height=5, fig.width=5}
# To be inserted

```
---
        
## Generalized Linear Models



===
END
===

