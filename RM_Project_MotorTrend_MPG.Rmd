---
title: "Regression Models Project - Motor Trend Data 'mtcars' Miles Per Gallon Analysis"
author: "james c walmsley"
date: "12/1/2016"
output: 
  pdf_document: 
    fig_caption: yes
    fig_crop: yes
    fig_height: 6
    fig_width: 6
---

# I. Executive Summary:  
        ## Add after completing analysis
        NOTE: include some info on cor, confint, ChisSq?, VIF
# II. Problem Statement & Questions to Answer:  
        ## Assuming I work for Motor Trend, a magazine about the automobile industry. Looking at the data set of a collection of cars ("mtcars") I know that;   
        ## Motor Trend is interested in exploring the relationship between a set of variables and the miles per gallon (mpg) outcome.   
        ## They are particularly interested in the following two questions:  
                ## Q1 “Is an automatic or manual transmission better for 'mpg'”  
                ## Q2 "Quantify the MPG difference between automatic and manual transmissions"  
        ## Other assumptions
                ## A Correlation with 'mpg' by variables other than transmission type may exist
                ## B Certain models may exert influence / leverage on the correlation between mpg & am

# Grading - Criteria (remove on completion)!!!  

Did the student interpret the coefficients correctly?  

Did the student do some exploratory data analyses?  

Did the student fit multiple models and detail their strategy for model selection?  

Did the student answer the questions of interest or detail why the question(s) is (are) not answerable?  

Did the student do a residual plot and some diagnostics?  

Did the student quantify the uncertainty in their conclusions and/or perform an inference correctly?  

Was the report brief (about 2 pages long) for the main body of the report and no longer than 5 with supporting appendix of figures?  

Did the report include an executive summary?  

YES Was the report done in Rmd (knitr) with pdf output?  

# III. Analysis Considerations:
        Descriptive - (dim, str & summary) statistics
        Exploratory - pairs, histograms, boxplots & (multiple plots)  
        Analysis - Mean, T-Test, Z-Test, covariance, OLS, regression to mean (-1),  
        simple linear regression, multivariable regression & model selection,  
        adjustments, residuals (predict fit, residual fit (-1)), hatvalues, variation  
        & dfbetas, R^2, diagnostics; ANOVA, GLMs & Binary GLMs, coeficients, correlation,  
        confint, ChiSq-Test, VIF, binary, binomial, poisson

# IV. Software Environment:
        Set working directory:
```{r Set directory, echo=FALSE, results='hide'}
setwd("~/Desktop/Coursera_R/7_Regression Models/RM_proj_MPG_MotorTrendData")
```        
        System - session Info:
```{r Session Info, echo=FALSE, results='hide'}
sessionInfo()
```

# V. Accessing Data:
        Clean up the work space & get the data: 
```{r Get data, echo=TRUE, results='hide'}
rm(list=ls()); data("mtcars")
```

# VI. Raw Data Overview: Motor Trend 'mtcars' data set:
```{r Data overview, echo=TRUE, results='hide'}
any(is.na(mtcars)); head(mtcars, 3)
```

# VII. Process Data:  
        Transformationns = Factor variables 8:11; modify variable names for col 8 & 9
```{r Process data, echo=TRUE, results='hide'}
data(mtcars)
mtcars$vs <- factor(mtcars$vs, labels = c("V-eng", "S-eng")); mtcars$am <- factor(mtcars$am, labels = c("Automatic", "Manual")); mtcars$gear <- factor(mtcars$gear); mtcars$carb <- factor(mtcars$carb)
head(mtcars,3)
```

# VIII. Exploratory Analysis:  
        Add narrative here!!
        See Appendix A, Figures 1:4 

# IX. Statistical Modeling, Regression & Model Fit:
        Assumptions:
                A A correlation to mpg ratings may exist among multiple variables
                B
                C

# X.Preliminary Findings:  
        Questions of Interest:
                A What other regressos if any correlated with mpg rating and transmission type?
                B 
        Interpretation of Results:
                A Using ANOVA table with Nested Multivariate Regression fit it is clear that the variable weight (wt) is significance according with a code of ** = 0.001
                B Based on the 
                C

# XI. Inference:
        Hypothesis':
                A H0 = The difference between Automatic and Manual transmission MPG = 0   
                B Ha = The difference between Automatic and Manual transmission MPG != 0
                C Desired confidence interval = .95 (one sided) ??

# XII. Conclusions / Recommendations:  
        A
        B

# XIII. Are there other alternative analyses?
        A VIF
        B Challenge the results ?
        C Measures of uncertainty 'e'

---
# XIV. Appendix A, "Graphical Analysis""

## Pairs
```{r Pairs, echo=FALSE, fig.height=4.5, fig.width=4.5, message=FALSE, warning=FALSE}
data(mtcars)
par(mfrow = c(1, 1), cex = 0.6)
pairs(mtcars[,c(1,6,9)], data = mtcars)
```

## Histograms
```{r HistFigure1, echo=FALSE, fig.height=4.5, fig.width=5.5}
data(mtcars)
par(mfrow = c(2,1), mar = c(4,4,2,1)) # set margin
mtcars$vs <- factor(mtcars$vs, labels = c("V-block", "S-block")); mtcars$am <- factor(mtcars$am, labels = c("Auto", "Manual")); mtcars$gear <- factor(mtcars$gear); mtcars$carb <- factor(mtcars$carb)
head(mtcars,3)
hist(mtcars$mpg[mtcars$am=="Auto"], breaks=10, xlab = "Miles-Per-gallon", ylab = "Count", main = "Automatic Transmission", col = "yellow", xlim = range(5:40))
abline(v=mean(mtcars$mpg[mtcars$am=="Auto"]), col="red", lwd = 4)
hist(mtcars$mpg[mtcars$am=="Manual"], breaks=10, xlab = "Miles-Per-gallon", ylab = "Count", main = "Manual Transmission", col="lightblue", xlim = range(5:40))
abline(v=mean(mtcars$mpg[mtcars$am=="Manual"]), col="blue", lwd = 4)
```

## Box Plots
```{r Box Plot Figure 1, echo=FALSE, fig.height=4.5, fig.width=4.5}
data("mtcars")
mtcars$vs <- factor(mtcars$vs, labels = c("V-block", "S-block")); mtcars$am <- factor(mtcars$am, labels = c("Auto", "Manual")); mtcars$gear <- factor(mtcars$gear); mtcars$carb <- factor(mtcars$carb)
head(mtcars,3)
boxplot(mpg ~ am, data = mtcars, col = (c("yellow","lightblue")), ylab = "Miles-Per-Gallon", xlab = "Transmission", main =  "Automatic vs Manual Transmission, Miles Per Gallon Ratings")
```

## Simple Linear Regression Single Variable Plot
```{r SimpleLinearRegression, echo=FALSE, fig.height=6, fig.width=6,}
par(mfrow = c(2, 2), mar = c(4, 5, 2, 1));fslrm <- lm(mpg ~ am, data = mtcars);
coef(summary(fslrm)); # plot(fslrm)
```

## Bivariate Linear Model Regression plot
```{r Bivariate Linear Model Regression Plot, echo=FALSE, fig.height=6, fig.width=6}
data("mtcars")
f2 <- lm(mpg ~ factor(am) + wt, data = mtcars);coef(summary(f2))
f3 <- lm(mpg ~ factor(am) * wt, data = mtcars);coef(summary(f3))
```

## Multivariate LM (all vars)-Residuals/Fitted/Residuals vs Fitted
```{r MultvariateLM(all vars), echo=FALSE, results='hide', fig.height=6.5, fig.width=6.5}
par(mfrow = c(2, 2), mar = c(4, 5, 2, 1))
mlr1 <- lm(mpg ~ ., data = mtcars);coef(summary(mlr1))
```

## Multivariate LM (all vars)-Residuals/Fitted/Residuals vs Fitted & Adjusted
```{r MultvariateLM(all vars)b, echo=FALSE, results='hide', fig.height=6.5, fig.width=6.5}
par(mfrow = c(2, 2), mar = c(4, 5, 2, 1))
mlr1 <- lm(mpg ~ . -1, data = mtcars);coef(summary(mlr1))
```

## Multivariate LM Nested Plot
```{r ANOVA_Nested_LM, echo=FALSE, results='hide'}
data("mtcars")
fn1 <- lm(mpg ~ cyl + disp, data = mtcars)
fn2 <- update(fn1, mpg ~ cyl + disp + hp)
fn3 <- update(fn1, mpg ~ cyl + disp + hp + drat)
fn4 <- update(fn1, mpg ~ cyl + disp + hp + drat + wt)
fn5 <- update(fn1, mpg ~ cyl + disp + hp + drat + wt +  qsec)
fn6 <- update(fn1, mpg ~ cyl + disp + hp + drat + wt +  qsec + vs)
fn7 <- update(fn1, mpg ~ cyl + disp + hp + drat + wt +  qsec + vs +  am)
fn8 <- update(fn1, mpg ~ cyl + disp + hp + drat + wt +  qsec + vs +  am +  gear)
fn9 <- update(fn1, mpg ~ cyl + disp + hp + drat + wt +  qsec + vs +  am +  gear + carb)
anova(fn1, fn2, fn3, fn4, fn5, fn6, fn7, fn8, fn9)
```

## Generalized Linear Models - na

## Binary Generalized Linear Models (Example from course text need to apply to thi project)
```{r Binary GLM, echo=FALSE, fig.height=6, fig.width=6}
# beta0 = 0; beta1 = 1
# p = 1 / (1 + exp(-1 * (beta0 + beta1 * x)))
# 
# plot(x, y, frame = FALSE, xlab = "x", ylab = "y") lines(lowess(x, y), type = "l", col = "blue", lwd = 3)
# fit = glm(y ~ x, family = binomial)
# lines(x, predict(fit, type = "response"), lwd = 3, col = "red")
```

===
END
===

