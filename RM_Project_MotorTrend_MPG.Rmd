---
title: "Regression Models Project - Motor Trend Data 'mtcars' Miles Per Gallon Analysis"
author: "james c walmsley"
date: "12/1/2016"
output: 
  pdf_document: 
    fig_caption: yes
    fig_crop: yes
    fig_height: 6
---

# I. Executive Summary:  
        ## Add after completing analysis  

---

# II. Problem statement & questions to be answered:  
        ## Assuming I work for Motor Trend, a magazine about the automobile industry. Looking at the data set of a collection of cars ("mtcars") I know that;   
        ## They are interested in exploring the relationship between a set of variables and the miles per gallon (mpg) outcome.   
        ## They are particularly interested in the following two questions:  
                ## Q1 “Is an automatic or manual transmission better for 'mpg'”  
                ## Q2 "Quantify the MPG difference between automatic and manual transmissions"  
---

# Grading - Criteria (remove on completion)  

Did the student interpret the coefficients correctly?  

Did the student do some exploratory data analyses?  

Did the student fit multiple models and detail their strategy for model selection?  

Did the student answer the questions of interest or detail why the question(s) is (are) not answerable?  

Did the student do a residual plot and some diagnostics?  

Did the student quantify the uncertainty in their conclusions and/or perform an inference correctly?  

Was the report brief (about 2 pages long) for the main body of the report and no longer than 5 with supporting appendix of figures?  

Did the report include an executive summary?  

YES Was the report done in Rmd (knitr) with pdf output?  

---

# III. Analysis considerations outline:
        Descriptive  
        Exploratory  
        OLS Ordinary least squares
        Regression to the mean - Simple linear regression  
        Statistical linear regression  
        Residuals  
        Regression inference  
        Multivariable regression analysis  
        Adjustments
        Residuals, variation, diagnostics
        Multiple variables & model selection
        GLMs
        Binary GLMs
        Count data
---

# IV. Software environment:
        System - session Info:
```{r Session Info, echo=TRUE}
sessionInfo()
```
---

# V. Accessing data:
        Getting the data: 
```{r Get data, echo=FALSE,}
rm(list=ls()); data("mtcars") 
```
---       

# VI. Raw data overview: 
        Motor Trend 'mtcars' data set:
```{r Data overview, echo=TRUE}
any(is.na(mtcars)); colnames(mtcars)
```
---

# VII. Processing data:  
        Transformations;  
                1 factor variables 8:11;  
                2 change variable labels in columns 8 & 9;      
                        a Note; for column header 8 = vs; variable names = V-block, & S-block;  
                        b Note; for column header 9 = am; variable names = Automatic = A, & Manual = M;
---                        
```{r Process data, echo=FALSE}
data(mtcars)
mtcars$vs <- factor(mtcars$vs, labels = c("V-block", "S-block")); mtcars$am <- factor(mtcars$am, labels = c("Automatic", "Manual")); mtcars$gear <- factor(mtcars$gear); mtcars$carb <- factor(mtcars$carb); mtcarsProc <- mtcars; head(mtcarsProc)

```
---

# VIII. Exploratory Analysis:  
        See Appendix A Figures 1:4 
---  

# IX. Statistical Modeling, Regression & Model Fit:
        Assumptions:
                A Multivarite intercorrelation exists   
                B
                C
        Simple Linear Regression
---
```{r SimpleLinearRegression, echo=TRUE}
fslrm <- lm(mpg ~ factor(am), data = mtcarsProc); fslrm
coef(summary(fslrm))
```
---        
        Statistical linear regression  
                Basic - w additive Gaussian error  
                Interpretation of regression coefficients (intercept, slope)  
                Regression - prediction  
        Multivariate Linear Regression
                lm - simple
                lm - multivariate
                lm - nested
                lm - remove the intercept (-1)
                lm - step function 
---

# X.Preliminary findings: quesions of interest: & interpretation of results:
        A
        B
        C

---
# XI. Inference:
        Assumptions:
                A Variables other than transmission type may influence MPG ratings   
                B 
                C
        State H0 & Ha hypothesis'here
                Set Seed, if required
                One or Two Sided Test
                Power / Alpha
                Beta = (1 - Alpha)
                Confidence Intervals (.95 one sided, .975 two sided)
                Standard Error
                Variance
                student's T-score
                Z-score
                p-Values
                Residual Plots with diagnostics see Appendix
---

# XII. Conclusions / recommendations:  
        A
        B
        C
                1 Challenge the results ?
                2 Measures of uncertainty 'e'
---

# XIII. Are there any possible viable alternative analyses?
        A
        B
---

# XIV. Appendix A, "Visual Analysis Plots""

Figure 1, Pairs
---

```{r Pairs plot, echo=FALSE, fig.height=6, fig.width=6}
pairs(mpg ~ ., data = mtcarsProc)
```
---                
        
Figure 2, Histograms
---

```{r Hist plot1, echo=FALSE, fig.height=5, fig.width=5, message=FALSE, warning=FALSE}
data(mtcarsProc)
mtcarsProc$vs <- factor(mtcarsProc$vs, labels = c("V-block", "S-block")); mtcarsProc$am <- factor(mtcarsProc$am, labels = c("Auto", "Manual")); mtcarsProc$gear <- factor(mtcarsProc$gear); mtcarsProc$carb <- factor(mtcarsProc$carb);
hist(mtcarsProc$mpg, breaks=15, xlab = "Miles-Per-gallon", main = "Histogram mtcars$mpg", xlim = range(5:40))
```
# OR
```{r Hist plot2, echo=FALSE, fig.height=5, fig.width=5}
data(mtcarsProc)
par(mfrow = c(2,1), mar = c(4,4,2,1)) # set margin
hist(mtcarsProc$mpg[mtcarsProc$am=="Auto"], breaks=10, xlab = "Miles-Per-gallon", ylab = "Count", main = "Automatic Transmission", col = "yellow", xlim = range(5:40));
abline(v=mean(mtcarsProc$mpg[mtcarsProc$am=="Auto"]), col="red", lwd = 4)
hist(mtcarsProc$mpg[mtcarsProc$am=="Manual"], breaks=10, xlab = "Miles-Per-gallon", ylab = "Count", main = "Manual Transmission", col="lightblue", xlim = range(5:40));
abline(v=mean(mtcarsProc$mpg[mtcarsProc$am=="Manual"]), col="blue", lwd = 4)
```



```{r Hist Plot 3, echo=FALSE, fig.height=5, fig.width=5}
mtcarsProc$vs <- factor(mtcarsProc$vs, labels = c("V-block", "S-block")); mtcarsProc$am <- factor(mtcarsProc$am, labels = c("Auto", "Manual")); mtcarsProc$gear <- factor(mtcarsProc$gear); mtcarsProc$carb <- factor(mtcarsProc$carb)
data(mtcarsProc)
head(mtcarsProc)
g <- ggplot(mtcarsProc, aes(x = mpg, fill = am))
g <- g + geom_histogram(colour = "black", binwidth = 3)
g <- g + geom_vline(xintercept = mean((mtcarsProc$mpg[mtcarsProc$am == "Auto"]), size = 1)) 
g <- g + geom_vline(xintercept = mean((mtcarsProc$mpg[mtcarsProc$am == "Manual"]), size = 1)) 
g <- g + facet_grid(. ~ am)
g
```
---                
        
Figure 3, Box Plot
---

```{r Box plot, echo=FALSE, fig.height=5, fig.width=5}
data("mtcarsProc")
boxplot(mpg ~ am, data = mtcarsProc, col = (c("grey","grey")), ylab = "Miles-Per-Gallon", xlab = "Transmission", main =  "MPG Boxplot")
```
---                
===




Figure 4, QQ Plot
---

```{r QQ plot, echo=FALSE, fig.height=5, fig.width=5}
data("mtcarsProc")
#qqPlot(fit?, main="Q-Q plot")
```
---                
        
Figure 5, Single Variable Linear Model Regression plot
```{r SingleVarLMfit, echo=FALSE}
data("mtcarsProc")
f1 <- lm(mpg ~ factor(am), data = mtcarsProc)
coef(summary(f1))
library(ggplot2)

```

---
Figure 6, Bivariate Linear Model Regression plot
```{r}
data("mtcarsProc")
f2 <- lm(mpg ~ factor(am) + wt, data = mtcarsProc)
coef(summary(f2))
f3 <- lm(mpg ~ factor(am) * wt, data = mtcarsProc)
coef(summary(f3))
```

---

```{r Fitted plot, fig.height=5, fig.width=5}
#To be inserted
```
---
Figure 7, Multivariate Linear Model(s) plot

---

```{r Fitted plot2, fig.height=5, fig.width=5}
#To be inserted
```
---                
        
Figure 8, Residuals plot

---

```{r Residual plot, echo=FALSE, fig.height=5, fig.width=5}
#plot(resid(fit?))
#abline(h=0)
```
---                
        
Figure 9, Residuals vs Fitted

---

```{r Residuals vs Fitted plot, echo=FALSE, fig.height=5, fig.width=5}
# To be inserted

```
---
        
Figure 10, GLM









===
END
===

